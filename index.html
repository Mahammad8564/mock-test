<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">

    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>

    <!-- Don't use this in production: -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">

        class App extends React.Component {

        constructor(props) {
            super(props);
            this.state = {
                value: '',
                words: []
            };
        }

        componentDidMount() {
            fetch('/words')
                .then(res => res.json())
                .then((data) => {
                    this.setState({ words: data })
                })
                .catch(console.error)
        }

        handleChange = (event) => {
            this.setState({ value: event.target.value });
        }

        handleSubmit = (event) => {
            event.preventDefault();

            fetch('/words', {
                method: 'POST',
                headers: {
                    Accept: 'application/json',
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    value: this.state.value,
                })
            }).then(() => {
                this.setState({ value: '' });
                this.componentDidMount();
            })
        }

        render() {
            return (
                <div className="container">
                    <h2>Words count</h2>

                    <div className="row">
                        <div className="col-sm-4" style={{ 'maxHeight': '85vh', 'overflow': 'auto' }}>
                            <ul className="list-group" >
                                {
                                    this.state.words.map(x => {
                                        return <li key={x._id} className="list-group-item">{x._id} <span className="badge">{x.count}</span></li>
                                    })
                                }
                            </ul>
                        </div>
                        <div className="col-sm-8">
                            <form onSubmit={this.handleSubmit}>
                                <div className="form-group">
                                    <label htmlFor="comment">Comment:</label>
                                    <textarea className="form-control" rows="5" id="comment" value={this.state.value} onChange={this.handleChange}></textarea>

                                </div>

                                <div>
                                    <button type="submit" className="btn btn-primary">Submit</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            )
        }

        }

        ReactDOM.render(<App />, document.getElementById('root'))
    </script>

</body>

</html>